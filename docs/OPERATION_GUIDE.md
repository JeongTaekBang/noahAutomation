# Operation Guide - 발주 운영 가이드

## 수량 변경 (Revised PO) 처리 절차

이미 발주한 PO의 수량이 변경되는 경우의 운영 방법.

### 시나리오

- Line 1~3으로 PO 발행 완료 (ND-0001)
- Line 2 모델B가 100개 → 200개로 추가 발주 필요

### 원칙

1. **SO 시트**: 기존 라인 수정하지 않고, **새 라인(Line 4)으로 추가분 기록**
2. **PO 발행**: Line 1~4 **전체를 포함**한 수정 발주서(Revised PO) 발행
3. **수량 합산은 공장(NOAH) 판단**: RCK는 SO 데이터를 있는 그대로 내보냄

### 처리 흐름

```
[1] SO 시트 (NOAH_SO_PO_DN.xlsx)
    ─────────────────────────────────
    Line 1: 모델A   50개   ← 원본
    Line 2: 모델B  100개   ← 원본
    Line 3: 모델C   30개   ← 원본
    Line 4: 모델B  100개   ← 추가분 (신규 입력)

[2] PO 발행 (수정 발주서)
    ─────────────────────────────────
    PO No: ND-0001-R1 (Revised)

    Line 1: 모델A   50개   ← 변경 없음
    Line 2: 모델B  100개   ← 변경 없음
    Line 3: 모델C   30개   ← 변경 없음
    Line 4: 모델B  100개   ← 추가

[3] NOAH 공장 처리
    ─────────────────────────────────
    - 수정 발주서 수신
    - Line 4 추가분을 F&O SO에 라인 추가
    - 생산 계획에서 같은 모델이면 WO 합산은 공장 내부 판단
```

### SO 시트에 새 라인으로 추가하는 이유

| 관점 | 설명 |
|------|------|
| 이력 보존 | 원래 100개였다는 기록이 SO 시트에 남음 |
| PO 매칭 | 원본 PO(Line 1~3)와 SO 시트가 일치 |
| 추적 용이 | 언제 추가 발주가 발생했는지 명확 |

### PO에서 합산하지 않는 이유

| 관점 | 설명 |
|------|------|
| SO-PO 라인 매칭 | 1:1 매칭 유지로 대조 명확 |
| 공장 판단 존중 | 수량 합산/WO 관리는 공장(NOAH)의 생산 계획 영역 |
| 구현 단순 | 합산 로직(같은 모델 판별, 사양 비교) 불필요 |
| 혼란 방지 | Line 4만 보내면 원래 오더의 추가분인지 별도 오더인지 불명확 |

### PO 전체 라인을 보여주는 이유

- NOAH 공장이 **전체 오더 범위**를 한눈에 파악
- **뭐가 추가됐는지** 바로 인식 가능
- 기존 Line 1~3은 이미 처리 중이므로 **Line 4만 새로 추가** 하면 됨

### 향후 구현 사항

- [ ] Revised PO 생성 기능 (`ND-0001` → `ND-0001-R1`)
- [ ] PO에 "Revised" 표시
- [ ] 추가/변경된 라인 하이라이트 (선택)
- [ ] 이력에 리비전 기록
